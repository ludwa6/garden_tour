<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>QR Admin</title>

    <!-- Dynamic base path: works on localhost and GitHub Pages -->
  <script>
    if (location.hostname === "127.0.0.1" || location.hostname === "localhost") {
      document.write('<base href="/">');
    } else {
      document.write('<base href="/garden_tour/">');
    }
  </script>

  <link rel="stylesheet" href="style.css?v=2">
</head>
<body class="qr-admin-page">
  <div class="appbar">
    <h1>QR Admin</h1>
    <a href="index.html" class="back-btn">‚Üê Back to main</a>
  </div>

  <main id="qr-admin-content">
    <!-- Controls -->
    <div class="controls">
      <label for="observationSelect">Select Observation:</label>
      <select id="observationSelect">
        <option value="">Loading...</option>
      </select>
    </div>

    <!-- QR code preview -->
    <div id="qr-preview">
      <h3>Custom QR Code:</h3>
      <canvas id="qrCanvas"></canvas>
    </div>
    
    <!-- Observation preview -->
    <div id="observationPreview" class="preview"></div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="qr_admin.js"></script>

<footer id="site-footer"></footer>

<script>
  // Inject shared footer.html into this page
  fetch("footer.html")
    .then(res => res.text())
    .then(html => {
      document.getElementById("site-footer").innerHTML = html;

      // Fix link paths based on environment
      const basePath = window.location.hostname.includes("github.io")
        ? "/garden_tour/"
        : "/";
      document.querySelectorAll("#site-footer .nav-link").forEach(link => {
        link.href = basePath + link.dataset.target;
      });
    })
    .catch(err => console.error("Failed to load footer:", err));
</script>

</body>
</html>

